<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dark Mode Test</title>

  <!-- Tailwind with Dark Mode Config -->
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind = {
      darkMode: "class",
    };
  </script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col items-center justify-center gap-6">

  <h1 class="text-3xl font-bold">Dark Mode Toggle Test</h1>

  <!-- ðŸŒ…/ðŸŒ™ Watch-Complication Toggle -->
  <button data-dark-toggle 
    class="relative w-16 h-8 bg-gray-300 dark:bg-gray-700 rounded-full overflow-hidden flex items-center justify-center shadow-inner transition-colors">

    <!-- Stationary circular window -->
    <div class="relative w-6 h-6 overflow-hidden rounded-full shadow bg-white dark:bg-gray-900 transition-colors">
      
      <!-- Icon stack: sun (top), moon (bottom) -->
      <div class="icon-stack absolute inset-0 flex flex-col items-center transition-transform duration-500 ease-in-out">
        
        <!-- Sun icon -->
        <i data-lucide="sun" class="w-5 h-5 text-yellow-500 mb-1"></i>

        <!-- Moon icon -->
        <i data-lucide="moon" class="w-5 h-5 text-blue-200 mt-1"></i>

      </div>
    </div>
  </button>

  <p>This page should fade between light and dark modes when the icon rises/sets.</p>

  <script>
    // Load saved theme
    if (
      localStorage.getItem("theme") === "dark" ||
      (!localStorage.getItem("theme") &&
        window.matchMedia("(prefers-color-scheme: dark)").matches)
    ) {
      document.documentElement.classList.add("dark");
    }

    // Update the toggle animation
    function updateToggleUI() {
      const isDark = document.documentElement.classList.contains("dark");
      const stack = document.querySelector(".icon-stack");

      if (!stack) return;

      // Shift icons up/down:
      // Light mode â†’ sun centered
      // Dark mode â†’ moon centered
      stack.style.transform = isDark 
        ? "translateY(-1.5rem)"  // Moon rises
        : "translateY(0)";       // Sun rises
    }

    updateToggleUI(); // initial alignment

    // Attach click handler to toggle
    document.querySelectorAll("[data-dark-toggle]").forEach(btn => {
      btn.addEventListener("click", () => {
        const nowDark = document.documentElement.classList.toggle("dark");
        localStorage.setItem("theme", nowDark ? "dark" : "light");
        updateToggleUI();
      });
    });

    // Render icons
    lucide.createIcons();
  </script>

</body>
</html>
